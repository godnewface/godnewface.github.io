<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Generator Absurditas</title>
  <style>
    body {
      background-color: #0d0d0d;
      color: #fff;
      font-family: Arial, sans-serif;
      padding: 2rem;
      text-align: center;
      transition: all 0.3s ease;
    }
    h1 {
      font-size: 2rem;
      margin-bottom: 1rem;
      color: #00ff88;
    }
    button {
      padding: 0.6rem 1.2rem;
      font-size: 1rem;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      background-color: #222;
      color: white;
      transition: background-color 0.3s ease;
      margin: 0.3rem;
    }
    button:hover {
      background-color: #444;
    }
    #output {
      margin-top: 2rem;
      font-size: 1.2rem;
      color: #fff;
      transition: opacity 0.4s ease;
    }
    .fade {
      opacity: 0;
    }
    .filter-group {
      margin: 1rem auto;
      text-align: center;
    }
    label {
      font-weight: bold;
      color: #00ff88;
    }
    .checkbox-container {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }
  </style>
</head>
<body>
  <h1>Generator Prompt Absurditas</h1>
  <div
                  style="
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    margin-bottom: 20px;
                  "
                >
                  <div class="a2a_kit a2a_kit_size_32 a2a_default_style">
                    <a class="a2a_dd" href="https://www.addtoany.com/share"></a
                    ><a class="a2a_button_facebook"></a
                    ><a class="a2a_button_whatsapp"></a
                    ><a class="a2a_button_google_gmail"></a
                    ><a class="a2a_button_x"></a>
                  </div>
                  <script
                    defer
                    src="https://static.addtoany.com/menu/page.js"
                  ></script>
                </div>
  <script defer src="https://static.addtoany.com/menu/page.js"></script>
  <!-- AddToAny END -->

  <div class="filter-group">
    <label>Mood:</label>
    <div id="moodCheckboxes" class="checkbox-container"></div>

    <label>Topik:</label>
    <div id="topicCheckboxes" class="checkbox-container"></div>
  </div>

  <button onclick="generatePrompt()">ðŸŽ² Acak Prompt</button>
  <button onclick="shareToChatGPT()">ðŸ”— Buka di ChatGPT</button>
  <div id="output"></div>

  <script>
    let prompts = [];
    let currentPrompt = null;

    async function loadPrompts() {
      const res = await fetch('assets/json/absurditas.json');
      prompts = await res.json();

      const moods = new Set();
      const topics = new Set();
      prompts.forEach(p => {
        p.mood.forEach(m => moods.add(m));
        p.topic.forEach(t => topics.add(t));
      });

      const moodBox = document.getElementById('moodCheckboxes');
      moods.forEach(mood => {
        const cb = document.createElement('label');
        cb.innerHTML = `<input type="checkbox" value="${mood}" /> ${mood}`;
        moodBox.appendChild(cb);
      });

      const topicBox = document.getElementById('topicCheckboxes');
      topics.forEach(topic => {
        const cb = document.createElement('label');
        cb.innerHTML = `<input type="checkbox" value="${topic}" /> ${topic}`;
        topicBox.appendChild(cb);
      });
    }

    function getCheckedValues(containerId) {
      return Array.from(document.querySelectorAll(`#${containerId} input:checked`)).map(cb => cb.value);
    }

    function generatePrompt() {
      const selectedMoods = getCheckedValues('moodCheckboxes');
      const selectedTopics = getCheckedValues('topicCheckboxes');

      const filtered = prompts.filter(p => {
        const moodMatch = selectedMoods.length === 0 || selectedMoods.some(m => p.mood.includes(m));
        const topicMatch = selectedTopics.length === 0 || selectedTopics.some(t => p.topic.includes(t));
        return moodMatch && topicMatch;
      });

      if (filtered.length === 0) {
        document.getElementById('output').innerHTML = 'ðŸš« Tidak ada hasil.';
        return;
      }

      const i = Math.floor(Math.random() * filtered.length);
      currentPrompt = filtered[i];
      const out = document.getElementById('output');
      out.classList.add('fade');
      setTimeout(() => {
        out.innerHTML = `ðŸ§  <b>${currentPrompt.question}</b><br><small>[Mood: ${currentPrompt.mood.join(', ')} | Topik: ${currentPrompt.topic.join(', ')}]</small>`;
        out.classList.remove('fade');
      }, 300);
    }

    function shareToChatGPT() {
      if (!currentPrompt) return;
      const url = `https://chat.openai.com/?prompt=${encodeURIComponent(currentPrompt.question)}`;
      window.open(url, '_blank');
    }

    loadPrompts();
  </script>
</body>
</html>
